# Polarity Study Tools

このディレクトリには、GPRデータの極性研究に特化したツールが含まれています。反射波の極性解析、サイズ推定、結果の統計的評価に関する専門的な機能を提供します。

## 概要

極性研究ツールは、GPRデータにおける反射波の極性（正負の符号）を解析し、地下構造のサイズや特性を推定する特殊な研究分野のためのツールです。これらのツールは、小規模な散乱体の検出と特性評価に特化しています。

### 研究背景
- **極性解析**: 反射波の極性パターンからの情報抽出
- **サイズ推定**: 散乱体のサイズと形状の推定
- **統計的評価**: 複数の測定結果の統計的解析

## 含まれるツール

### 結果可視化・統計解析
- **`plot_result_summary.py`** - 極性研究結果の総合的な可視化
- **`plot_result_summary_small_rock_model.py`** - 小規模岩石モデルの結果可視化
- **`plot_size_error.py`** - サイズ推定誤差の解析・可視化

## 使用方法

### 結果の総合可視化
```bash
# 極性研究結果の総合的な可視化
python -m tools.specialized.polarity_study.plot_result_summary config.json

# 小規模岩石モデルの結果可視化
python -m tools.specialized.polarity_study.plot_result_summary_small_rock_model config.json
```

### エラー解析
```bash
# サイズ推定誤差の解析
python -m tools.specialized.polarity_study.plot_size_error config.json
```

## 極性研究の理論

### 極性解析の基本原理
GPRにおける反射波の極性は、以下の要因によって決まります：

1. **媒質の誘電率コントラスト**: 高誘電率→低誘電率（負極性）、低誘電率→高誘電率（正極性）
2. **散乱体の形状**: 球状、楕円状、平板状等による散乱パターンの違い
3. **サイズ効果**: 波長に対する散乱体サイズの相対的な大きさ

### サイズ推定手法
極性パターンから散乱体のサイズを推定する手法：

```
Size estimation = f(polarity_pattern, frequency, velocity)
```

### 統計的評価
複数の測定や異なる条件での結果を統計的に評価：

- **平均値・分散**: 推定値の中心傾向と散布度
- **信頼区間**: 推定精度の評価
- **相関解析**: 各種パラメータ間の関係

## 設定ファイル例

```json
{
    "study_params": {
        "frequency_range": [100e6, 500e6],
        "velocity_model": "constant",
        "velocity_value": 0.1,
        "size_range": [0.01, 0.1],
        "polarity_threshold": 0.1
    },
    "analysis_params": {
        "statistical_method": "monte_carlo",
        "confidence_level": 0.95,
        "sample_size": 1000,
        "error_metrics": ["mae", "rmse", "relative_error"]
    },
    "visualization": {
        "plot_types": ["summary", "error_distribution", "correlation"],
        "color_scheme": "viridis",
        "save_format": "png"
    }
}
```

## 各ツールの詳細

### plot_result_summary.py
極性研究の総合的な結果を可視化します：

- **極性パターン**: 各測定での極性パターンの表示
- **サイズ推定**: 推定されたサイズの分布
- **統計サマリー**: 平均値、標準偏差、相関係数
- **品質評価**: 推定精度の評価指標

### plot_result_summary_small_rock_model.py
小規模岩石モデルに特化した結果可視化：

- **岩石サイズ**: 小規模岩石の推定サイズ
- **形状効果**: 岩石形状による極性への影響
- **深度依存性**: 埋設深度による推定精度の変化
- **モデル比較**: 異なるモデルでの結果比較

### plot_size_error.py
サイズ推定誤差の詳細解析：

- **誤差分布**: 推定誤差の統計的分布
- **系統誤差**: バイアスの評価
- **精度評価**: 推定精度の定量化
- **影響因子**: 誤差に影響する要因の分析

## 典型的な研究フロー

### 1. データ収集
- **シミュレーション**: 既知サイズの散乱体のシミュレーション
- **実測データ**: 制御された条件での測定
- **パラメータ設定**: 周波数、アンテナ配置等の設定

### 2. 極性解析
- **極性検出**: 反射波の極性パターンの抽出
- **特徴量抽出**: 極性パターンの数値化
- **ノイズ除去**: 測定ノイズの影響の除去

### 3. サイズ推定
- **推定アルゴリズム**: 極性パターンからのサイズ推定
- **不確実性評価**: 推定値の信頼性評価
- **検証**: 既知サイズとの比較

### 4. 統計的評価
- **結果統合**: 複数測定の統合
- **誤差解析**: 推定誤差の詳細解析
- **結果可視化**: 総合的な結果の可視化

## 関連ツール

- **velocity_analysis/**: 速度モデルの構築
- **analysis/**: 基本的な解析ツール
- **visualization/**: 基本的な可視化ツール
- **signal_processing/**: 信号前処理

## 注意事項

- **専門性**: 極性研究は専門的な知識が必要です
- **データ品質**: 高精度な測定データが必要です
- **統計的有意性**: 十分なサンプル数を確保してください
- **物理的妥当性**: 推定結果の物理的妥当性を確認してください
- **条件依存性**: 測定条件（周波数、配置等）への依存性を考慮してください

## 研究応用

### 地下探査
- **小規模障害物**: 埋設物の検出・サイズ推定
- **地質構造**: 小規模な地質構造の特性評価
- **品質管理**: 建設現場での品質評価

### 材料評価
- **コンクリート**: 内部欠陥の検出・評価
- **複合材料**: 内部構造の非破壊評価
- **品質検査**: 製品の品質評価

このディレクトリのツールは、GPRデータの極性解析という専門分野に特化した研究ツールです。使用には専門的な知識と適切な測定条件が必要です。